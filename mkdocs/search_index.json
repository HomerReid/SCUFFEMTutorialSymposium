{
    "docs": [
        {
            "location": "/", 
            "text": "Sneak preview of images from this tutorial: \nImage gallery\n\n\n\n\n\n\nDownload an archive of all input files used in the tutorials: \n\n\n\n\nSCUFFTutorial.tar.bz2\n\n\n\n\n\n\n\n\nOutline and agenda\n\n\n\n\n\n\n\n \n 9-10:15 AM \n\n \n \nOverview of integral-equation methods\n\n         and\n      \n introduction to \n         \n\n         \nscuff-em\n\n         and \n         \n\n         \nbuff-em\n.\n \n\n\n\n\n\n\n \n 10:15 - 10:30 AM \n\n \n Coffee break\n \n\n\n\n\n\n\n \n 10:30 - 11:15 AM \n\n \n \nTutorial walkthrough, part 1:\n         Plasmonics and nanoantennas.\n      \n\n \n\n\n\n\n\n\n \n 11:15 AM - 12:00 PM \n\n \n \nTutorial walkthrough, part 2:\n         Transmission and diffraction.\n      \n\n \n\n\n\n\n\n\n \n 12:00 - 1:30 PM \n\n \n Lunch\n \n\n\n\n\n\n\n \n 1:30 - 3:00 PM \n\n \n \nTutorial walkthrough, part 3:\n         Forces, torques, and energy transfers\n         due to deterministic and stochastic\n         (thermal, quantum-mechanical) sources\n      \n\n \n\n\n\n\n\n\n \n 3:00 - 3:15 PM \n\n \n Coffee break \n \n\n\n\n\n\n\n \n 3:15 - 5:00 PM \n\n \n \nOpen-ended Q\nA session: one-on-one consultations,\n         installation assistance, technical support.", 
            "title": "Outline and Agenda"
        }, 
        {
            "location": "/ImageGallery/", 
            "text": "Image gallery", 
            "title": "Image gallery"
        }, 
        {
            "location": "/IntegralEquations/", 
            "text": "Integral-equation approaches to electromagnetic scattering", 
            "title": "Integral-equation approaches to electromagnetic scattering"
        }, 
        {
            "location": "/IntroToSCUFF/", 
            "text": "Overview of SCUFF-EM and BUFF-EM\n\n\nView this document in PDF form: \nSCUFFvsBUFF.pdf", 
            "title": "Introduction to SCUFF-EM"
        }, 
        {
            "location": "/SCUFFonAWS/", 
            "text": "scuff-em\n in the cloud: Running \nscuff-em\n calculations on Amazon AWS Nodes\n\n\nAlthough many nontrivial \nscuff-em\n\ncalculations---including all of the\n\ntutorial examples in the \nscuff-em\n documentation\n---can\nbe run quickly (few minutes or less) on a typical laptop or desktop workstation,\neventually you may want to run some larger-scale calculations.\nFor example, \n\n\n\n\n\n\nyou may want to \ncrank up the resolution of the surface meshes in a scattering problem\n\n  to get high numerical precision, or \n\n\n\n\n\n\nyou may want to [run large-scale parameter sweeps][ParameterSweep]\n  involving thousands of \nscuff-em\n\n  calculations at various values of geometrical or other parameters, or\n\n\n\n\n\n\nyou may be computing quantities that require both\n  [frequency and Brillouin-zone integration][HeatTransferProblem],\n  thus involving thousands of \nscuff-em\n\n  calculations at various frequencies and Bloch vectors.\n\n\n\n\n\n\nA very convenient way to run large-scale calculations\nwithout building your own supercomputer\nis to use an on-demand cloud-computing resource offering\npay-as-you-go access to remote compute nodes.\nOne example of such a resource is\n\nAmazon Web Services\n (AWS),\nwhere you can buy a few hour's worth of access to a\nquite powerful server at inexpensive prices. For example,\nas discussed below,\nthe cost of a machine with 16 \nHaswell\n cores\nand 30 GB memory can be as low as $0.10/hour\n(10 cents per hour).\n(This is using AWS \nspot instances\n, for which\ncurrent pricing information is available \nhere\n.)\n\n\nLaunch an AWS instance with the \nSimpetus\n Platform\n\n\nThe very first time you ever do this you will need to spend\nabout 10 minutes going through a totally straightforward procedure\nto set up an AWS account and \"launch an EC2 instance running\nthe \nSimpetus Electromagnetic Simulation Platform\n.\"\nI put this in quotes for the benefit of cloud-computing neophytes\n(like me!) to communicate that you don't have to understand all \nthe jargon here, or to follow precisely what is happening---all\nyou need to know is that, at the end of this process,\na server will have been magically created somewhere in the\ncloud for you (and only for you, with no other users) with\npre-installed versions of\n\nscuff-em\n and other modeling tools\nlike \n\nmeep\n\nand \n\nmpb\n.\nYou will have an IP address that you can use to log in to\nthis server, upload files to this server, run calculations\non this server, and download the results.\nOnce you're finished, you will \"terminate the EC2 instance\",\nwhereupon, poof! The server instantly disintegrates back into\nthe primordial soup of the cloud, taking with it all files\nyou uploaded or that were produced by your calculations.\nYou will be charged for only the time elapsed between\nlaunch and termination.\n\n\nThe entire procedure for launching your AWS instance\nis carefully explained in\n\nthis series of follow-along tutorial walkthrough videos\n\non the Simpetus youtube channel.\nIf you are already familiar with things like SSH keypairs\nyou can probably start with\n\nthis video\n,\nwhich will get you up and running with an EC2 instance.\n\n\nIn what follows I will refer to the EC2 instance created \nin this way as your \"cloud server.\"\n\n\nUpload and run initialization script on cloud server\n\n\nOnce your cloud server is running, the next step is to\nupload and run the following \nbash\n script:\n\n\n\n\nInitializeSCUFFOnAWS.sh\n\n\n\n\nThis script fetches the latest version of\n\nscuff-em\n from the\n\nscuff-em\n GitHub page\n\nand builds it on the EC2 instance with \nappropriate compilation options. (As a bonus, the script\nalso fetches and installs the awesome\n\nopenblas\n\npackage for automatically architecture-optimized linear algebra,\nsignificantly accelerating large-scale\n\nscuff-em\n calculations.)\n\n\nAssuming you are logging in to your EC2 instance from a terminal\non your Linux or Mac laptop, the process of uploading and \nrunning the script looks like this. \n\n\n1. Copy script from your local machine to the cloud server\n\n\n mylaptop% scp -i keypair.pem InitializeSCUFFonAWS.sh ubuntu@123.45.67.89:\n\n\n\n\nHere \n123.45.67.89\n is the IP address of the server you launched,\nand \nkeypair.pem\n is the SSH key-pair file you will have created\nin the launching process. \nNote the colon (\n:\n) at the far right end of the command line!\n\n\nOf course, you could also use a GUI-based file-transfer tool like\n\nwinscp\n\nto upload the script from Windows without using a terminal.\n\n\n2. Login to cloud server\n\n\nmylaptop % ssh -i keypair.pem ubuntu@123.45.67.89\n\nWelcome to Ubuntu 14.04.4 LTS (GNU/Linux 3.13.0-91-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\n\n  System information as of Wed Oct 12 01:30:34 UTC 2016\n\n...\n...\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\napplicable law.\n\nubuntu@ip-172-31-0-191:~$ \n\n\n\n\n3. Run initialization script on cloud server\n\n\nubuntu@ip-172-31-0-191:~$ . InitializeSCUFFOnAWS.sh\n\n*\n* Building OpenBLAS...\n*\n...\n...\n...\nmake[1]: Leaving directory `/home/ubuntu/scuff-em'\n\n*\n* SUCCESS building SCUFF-EM \n*\n26 ip-172-31-0-191 /home/ubuntu/scuff-em \n \n\n\n\n\nThis script takes about 10 minutes to run (on a node with 16 CPU cores).\nOnce it is finished, the \nscuff-em\n installation\nwill be present starting at your root filesystem, i.e.\n\n\n\n\n\n\nthe binary executable programs will be in \n${HOME}/bin\n\n\n\n\n\n\nthe examples will be in \n${HOME}/share/scuff-em\n,\n\n\n\n\n\n\netc.\n\n\nAlso, the script adds \n${HOME}/bin\n to your path, so that you\ncan run \nscuff-em\n commands from any directory\nwithout needing to specify the \n${HOME}/bin\n prefix.\n\n\nIf you would like to run any of the \nscuff-em\n examples\nmentioned in this tutorial, you will want to execute the \nfollowing additional steps:\n\n\n4. Download (to your laptop or desktop) the following archive file containing all meshes, geometry files,\nand other data needed to run the tutorial examples:\n\n\n\n\nSCUFFTutorial.tar.bz2\n\n\n\n\n5. From your laptop, upload this file to the cloud server: \n\n\n mylaptop% scp -i keypair.pem SCUFFTutorial.tar.bz2 .sh ubuntu@123.45.67.89:\n\n\n\n\n6. Unpack this file on the cloud server: \n\n\n290 ip-172-31-3-53 /tmp \n bunzip2 -c SCUFFTutorial.tar.bz2 | tar xvf -\nSCUFFTutorial/\nSCUFFTutorial/SpiralArrays/\nSCUFFTutorial/SpiralArrays/ScreenTransformations\nSCUFFTutorial/SpiralArrays/MakeSpiralArray.jl\n...\nSCUFFTutorial/PolarizationSensitiveAntenna/geoFiles/MakeMeshes\nSCUFFTutorial/PolarizationSensitiveAntenna/geoFiles/Triangle.geo\n\n\n\n\nNow the various subdirectories referenced by the discussions in this\ntutorial will be present on your cloud server in the \nSCUFFTutorial\n\nfolder.\n\n\nSpecial instructions for BU symposium participants\n\n\nFor today's symposium I've prepared several AWS machines\non which the latest \n\nscuff-em\n/\nbuff-em\n/\nversions and the input files for today's tutorials\nare pre-installed. Here are instructions for how to\naccess these machines:\n\n\n\n\n\n\nInstall \ngmsh\n on your laptop.\n\n\n\n\n\n\nWindows/Mac users: Download installer from \ngmsh\n website\n.\n\n\n\n\n\n\nUbuntu users: \n\n\n\n\n\n\n\n\n\n\n % apt-get install gmsh\n\n\n\n\n\n\n\n\nWindows users: Install SSH/SCP clients like\n   \nPuTTY\n and\n   \nWinSCP\n.\n   You will also need the PuTTY key generator,\n   PuTTYgen.\n\n\n\n\n\n\nDownload private key file for BU symposium AWS machines:\n\n\n\n\nseoul-keypair.pem\n\n\n\n\n\n\n\n\n4a. Windows users: Use PuTTYgen\n    to convert \nseoul-keypair.pem\n to PuTTY format.\n    If you have trouble, here is some guidance: \nConnecting to your Linux Instance from Windows using PuTTY\n.\n\n\n4b. Linux/Mac users:\n    Set correct access permissions for the private key file:\n\n\n % chmod 400 seoul-keypair.pem\n\n\n\n\n\n\nLog on the cloud server using PuTTY (Windows users) or \n   using \nssh\n (Linux/Mac users):\n\n\n\n\nmylaptop % ssh -Y -i seoul-keypair.pem ubuntu@XX.XX.XX.XX\n\n288 ip-172-31-3-53 /home/ubuntu\n\n\n\n\nHere \nXX.XX.XX.XX\n is the IP address you were assigned\nfor today's tutorial.", 
            "title": "SCUFF-EM computations in the cloud"
        }, 
        {
            "location": "/SCUFFonAWS/#launch-an-aws-instance-with-the-simpetus-platform", 
            "text": "The very first time you ever do this you will need to spend\nabout 10 minutes going through a totally straightforward procedure\nto set up an AWS account and \"launch an EC2 instance running\nthe  Simpetus Electromagnetic Simulation Platform .\"\nI put this in quotes for the benefit of cloud-computing neophytes\n(like me!) to communicate that you don't have to understand all \nthe jargon here, or to follow precisely what is happening---all\nyou need to know is that, at the end of this process,\na server will have been magically created somewhere in the\ncloud for you (and only for you, with no other users) with\npre-installed versions of scuff-em  and other modeling tools\nlike  meep \nand  mpb .\nYou will have an IP address that you can use to log in to\nthis server, upload files to this server, run calculations\non this server, and download the results.\nOnce you're finished, you will \"terminate the EC2 instance\",\nwhereupon, poof! The server instantly disintegrates back into\nthe primordial soup of the cloud, taking with it all files\nyou uploaded or that were produced by your calculations.\nYou will be charged for only the time elapsed between\nlaunch and termination.  The entire procedure for launching your AWS instance\nis carefully explained in this series of follow-along tutorial walkthrough videos \non the Simpetus youtube channel.\nIf you are already familiar with things like SSH keypairs\nyou can probably start with this video ,\nwhich will get you up and running with an EC2 instance.  In what follows I will refer to the EC2 instance created \nin this way as your \"cloud server.\"", 
            "title": "Launch an AWS instance with the Simpetus Platform"
        }, 
        {
            "location": "/SCUFFonAWS/#upload-and-run-initialization-script-on-cloud-server", 
            "text": "Once your cloud server is running, the next step is to\nupload and run the following  bash  script:   InitializeSCUFFOnAWS.sh   This script fetches the latest version of scuff-em  from the scuff-em  GitHub page \nand builds it on the EC2 instance with \nappropriate compilation options. (As a bonus, the script\nalso fetches and installs the awesome openblas \npackage for automatically architecture-optimized linear algebra,\nsignificantly accelerating large-scale scuff-em  calculations.)  Assuming you are logging in to your EC2 instance from a terminal\non your Linux or Mac laptop, the process of uploading and \nrunning the script looks like this.   1. Copy script from your local machine to the cloud server   mylaptop% scp -i keypair.pem InitializeSCUFFonAWS.sh ubuntu@123.45.67.89:  Here  123.45.67.89  is the IP address of the server you launched,\nand  keypair.pem  is the SSH key-pair file you will have created\nin the launching process. \nNote the colon ( : ) at the far right end of the command line!  Of course, you could also use a GUI-based file-transfer tool like winscp \nto upload the script from Windows without using a terminal.  2. Login to cloud server  mylaptop % ssh -i keypair.pem ubuntu@123.45.67.89\n\nWelcome to Ubuntu 14.04.4 LTS (GNU/Linux 3.13.0-91-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\n\n  System information as of Wed Oct 12 01:30:34 UTC 2016\n\n...\n...\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\napplicable law.\n\nubuntu@ip-172-31-0-191:~$   3. Run initialization script on cloud server  ubuntu@ip-172-31-0-191:~$ . InitializeSCUFFOnAWS.sh\n\n*\n* Building OpenBLAS...\n*\n...\n...\n...\nmake[1]: Leaving directory `/home/ubuntu/scuff-em'\n\n*\n* SUCCESS building SCUFF-EM \n*\n26 ip-172-31-0-191 /home/ubuntu/scuff-em     This script takes about 10 minutes to run (on a node with 16 CPU cores).\nOnce it is finished, the  scuff-em  installation\nwill be present starting at your root filesystem, i.e.    the binary executable programs will be in  ${HOME}/bin    the examples will be in  ${HOME}/share/scuff-em ,    etc.  Also, the script adds  ${HOME}/bin  to your path, so that you\ncan run  scuff-em  commands from any directory\nwithout needing to specify the  ${HOME}/bin  prefix.  If you would like to run any of the  scuff-em  examples\nmentioned in this tutorial, you will want to execute the \nfollowing additional steps:  4. Download (to your laptop or desktop) the following archive file containing all meshes, geometry files,\nand other data needed to run the tutorial examples:   SCUFFTutorial.tar.bz2   5. From your laptop, upload this file to the cloud server:    mylaptop% scp -i keypair.pem SCUFFTutorial.tar.bz2 .sh ubuntu@123.45.67.89:  6. Unpack this file on the cloud server:   290 ip-172-31-3-53 /tmp   bunzip2 -c SCUFFTutorial.tar.bz2 | tar xvf -\nSCUFFTutorial/\nSCUFFTutorial/SpiralArrays/\nSCUFFTutorial/SpiralArrays/ScreenTransformations\nSCUFFTutorial/SpiralArrays/MakeSpiralArray.jl\n...\nSCUFFTutorial/PolarizationSensitiveAntenna/geoFiles/MakeMeshes\nSCUFFTutorial/PolarizationSensitiveAntenna/geoFiles/Triangle.geo  Now the various subdirectories referenced by the discussions in this\ntutorial will be present on your cloud server in the  SCUFFTutorial \nfolder.", 
            "title": "Upload and run initialization script on cloud server"
        }, 
        {
            "location": "/SCUFFonAWS/#special-instructions-for-bu-symposium-participants", 
            "text": "For today's symposium I've prepared several AWS machines\non which the latest  scuff-em / buff-em /\nversions and the input files for today's tutorials\nare pre-installed. Here are instructions for how to\naccess these machines:    Install  gmsh  on your laptop.    Windows/Mac users: Download installer from  gmsh  website .    Ubuntu users:        % apt-get install gmsh    Windows users: Install SSH/SCP clients like\n    PuTTY  and\n    WinSCP .\n   You will also need the PuTTY key generator,\n   PuTTYgen.    Download private key file for BU symposium AWS machines:   seoul-keypair.pem     4a. Windows users: Use PuTTYgen\n    to convert  seoul-keypair.pem  to PuTTY format.\n    If you have trouble, here is some guidance:  Connecting to your Linux Instance from Windows using PuTTY .  4b. Linux/Mac users:\n    Set correct access permissions for the private key file:   % chmod 400 seoul-keypair.pem   Log on the cloud server using PuTTY (Windows users) or \n   using  ssh  (Linux/Mac users):   mylaptop % ssh -Y -i seoul-keypair.pem ubuntu@XX.XX.XX.XX\n\n288 ip-172-31-3-53 /home/ubuntu  Here  XX.XX.XX.XX  is the IP address you were assigned\nfor today's tutorial.", 
            "title": "Special instructions for BU symposium participants"
        }, 
        {
            "location": "/MieScattering/", 
            "text": "First calculations with SCUFF-EM and BUFF-EM: Mie Scattering\n\n\nTo get an initial flavor of the typical flow of\ncalculations in \nscuff-em\n and \nbuff-em\n,\ncalculation, let's first use these tools to solve\nthe textbook problem of \nMie scattering,\n the scattering\nof a plane wave by a homogeneous dielectric sphere.\n\n\n\n\nAs shown in the figure, we will take the sphere\nto have radius 1 \n\\mu\nm and the incident field to be a\nlinearly-polarized plane wave traveling in the positive\n\nz\n direction with magnitude \nE_0\n \nand wavevector \nk=\\frac{\\omega}{c}.\n\n\n\n\nExact solution\n\n\nFor this problem, the full scattered fields may be expressed\nexactly as a sum of vector spherical waves;\nthe full treatment may be found in \nthis memo\n\nor any electromagnetism textbook.\nHere we will two aspects of this solution.\n\n\nField components in the electrostatic limit\n\n\nIn the low-frequency limit \n\\omega\\to 0\n, the problem\nreduces to the textbook electrostatics problem of a\ndielectric cylinder placed in a constant external\nfield (see, for example, \nJackson Chapter 4\n).\nThe total electric field inside and outside the sphere\nreads:w\n\n \\mathbf E^\\text{tot}(\\mathbf x) = \n   \\begin{cases}\n   \\displaystyle{\\frac{3}{\\epsilon+2}}E_0, \\qquad &|\\mathbf x|<R \n   \\\\[5pt]\n   \\displaystyle{\n   E_0\\mathbf{\\hat x}\n + \\left(\\frac{\\epsilon-1}{\\epsilon+2}\\right)\n   \\left(\\frac{R}{r}\\right)^3 E_0\n   \\big(3\\mathbf{\\hat r} - \\mathbf{\\hat x}\\big)\n                }, \\qquad &|\\mathbf x|>R.\n   \\end{cases}\n\n\nwhere \n\\epsilon\n is the (relative) DC permittivity of the \nsphere.\n\n\nThe sphere acquires an electric dipole moment of strength\n\n \\mathbf p\n   = 4\\pi\\epsilon_0\\left(\\frac{\\epsilon - 1}{\\epsilon+2}\\right) R^3 E_0\n\n\nand the scattered field outside the sphere is just the electrostatic\nfield of this dipole.\n\n\nBelow we will consider the particular values\n\n\\epsilon=10, \\qquad R=1\\,\\mu\\text{m}, \\qquad E_0=1\\text{ V}/\\mu\\text{m}\n,\nin which case the theoretical treatment given above\nmakes two simple numerical predictions that we can \nuse to test the accuracy of our numerical solvers:\n\n\n\n\n\n\nThe \nx\n-component of the \n  \n\\mathbf E\n-field inside the sphere is constant and equal to\n  \n E_x^\\text{inside}\n     \\quad=\\quad\\displaystyle{\\frac{3}{\\epsilon+2}}E_0\n     \\quad=\\quad\\displaystyle{\\frac{3}{12}}E_0\n     \\quad\\quad= \\texttt{0.25} \\text{ V}/\\mu\\text{m} \n   \n\n\n\n\n\n\n\n\nThe \nx\n-component of the induced dipole moment is\n  \n p_x\n    \\quad=\\quad\n      \\frac{4\\pi}{cZ_0}\\cdot\\frac{\\epsilon-1}{\\epsilon+2}R^3 E_0\n      \\quad=\\quad\n      4\\pi\\cdot\\left(\\frac{1}{\\texttt{376.73031...}}\\right)\\cdot \\frac{9}{12}\n      \\quad=\\quad\n      \\texttt{0.02501} \\quad\\text{C }\\cdot\\mu\\text{m}.\n  \n\n\n\n\n\n\n\n\n(In this last calculation I have rewritten the\npermittivity of free space in terms of the vacuum speed\nof light and the vacuum wave impedance, \n\\epsilon_0=\\frac{1}{cZ_0}\n,\nthen used the values \nZ_0\\approx 376.73031\n and \nc=1\n\nin default \nscuff-em\n units.)\n\n\nPower, force, and torque (PFT) versus frequency\n\n\nMoving out of the low-frequency limit, the textbook\ntheory of Mie scattering makes the following predictions\nfor the total power scattered by the sphere:\n\n P^\\text{scat} = \\frac{\\pi E_0^2}{k^2 Z_0}\\sum_{\\ell=1}^\\infty\n  (2\\ell+1)\\Big( |a_\\ell|^2 + |b_\\ell|^2\\Big)\n\n\nwhere \nZ_0\\sim 377\\,\\Omega\n is the impedance of\nvacuum and the \n\\{a,b\\}_\\ell\n coefficients are\ndimensionless numbers defined by certain ratios\nof Bessel functions; explicit expressions are\ngiven, for example, in \n\nBohren \n Huffman\n, who \nalso give similar series expressions for the \nabsorbed power and force (radiation pressure).\n\n\nSolution in SCUFF-EM\n\n\nAll input files referenced below may be found\nin the \nMieScattering\n subdirectory of the\n\nSCUFFTutorial\n archive.\n.\n\n\ngmsh\n geometry and mesh files (\n.geo\n and \n.msh\n files)\n\n\nThe first step is to define a triangulated mesh\nrepresentation of the sphere's surface, a task\nfor which we use the wonderful open-source\nprogram \ngmsh\n.\nThe directory \nMieScattering/geoFiles\n\ncontains a \ngmsh\n input\nfile called \n\nSphere.geo\n, which we turn into a\nsurface mesh like this:\n\n\n mylaptop% gmsh -2 Sphere.geo\n\n\n\n\nThis produces the file \nSphere.msh,\n which you can open in\n\ngmsh\n to see what it looks like:\n\n\n\n\nscuff-em\n geometry files (\n.scuffgeo\n files)\n\n\nScattering geometries in \nscuff-em\n are described\nby simple text files conventionally given file extension \n.scuffgeo\n.\n(For reference, here's the \nsection of the \nscuff-em\n\ndocumentation discussing \n.scuffgeo\n files\n.)\n\n\nWe will create two \n.scuffgeo\n files, describing spheres\nof the same size but consisting of different materials:\n\n\n\n\nFor low-frequency calculations, we will consider a dielectric \nsphere of (frequency-independent) relative permittivity \n\\epsilon=10\n.\nThe \n.scuffgeo\n file for this case is called \nE10Sphere.scuffgeo:\n\n\n\n\n \nE10Sphere.scuffgeo\n \n \n\n\nOBJECT Sphere\n    MESHFILE Sphere_501.msh\n    MATERIAL CONST_EPS_10\nENDOBJECT\n\n\n\n\n\n\nFor PFT calculations, we will consider a gold sphere, with\nrelative permittivity described by the function\n\n \\epsilon^\\text{gold} = 1 - \\frac{\\omega_p^2}{\\omega(\\omega+i\\gamma)},\n   \\qquad \\{\\omega_p, \\gamma\\}=\\{1.37\\cdot 10^{16}, 5.32\\cdot 10^{13}\\}\n   \\text{ rad/sec}.\n\n\n\n\n\n\n\nThe \n.scuffgeo\n file for this case looks like this:\n\n\n \nGoldSphere.scuffgeo\n \n \n\n\nMATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nOBJECT Sphere\n    MESHFILE Sphere_501.msh\n    MATERIAL GOLD\nENDOBJECT\n\n\n\n\nFile specifying field evaluation points (\nEPFile\n)\n\n\nFor calculating field components in the electrostatic\ncase, we need to specify the Cartesian coordinates of\nour desired evaluation points. For this purpose we\nwrite a little text file called \nEPFile.XAxis\n describing\nevenly-spaced points lying on the \nx\n-axis in the range\n\n-3<x<3\\,\\mu\\text{m}\n:\n\n\n \nEPFile.XAxis\n \n \n\n\n-3.0 0.0 0.0\n-2.9 0.0 0.0\n...\n 2.9  0.0 0.0\n 3.0  0.0 0.0\n\n\n\n\nFile specifying frequencies for PFT calculation (\nOmegaFile\n)\n\n\nFinally, we need to specify the angular frequencies at which\nwe will compute power, force, and torque (PFT). For this purpose\nwe write a little text file called simply \nOmegaFile\n, \nwhich in this case contains logarithmically-spaced points\nin the range \n0.1\\omega_0 < \\omega < 10 \\omega_0\n, \nwhere the default frequency unit is \n\n\\omega_0 = c/(1\\,\\mu\\text{m})=3\\cdot 10^{14}\\text{ rad/sec}.\n\n\n\n\n \nOmegaFile\n \n \n\n\n0.10000000\n0.12589254\n...\n7.94328235\n10.00000000\n\n\n\n\nNote that the numerical values of \n\\omega\n here coincide\nwith numerical values of the dimensionless \nMie size parameter \nkR=\\omega R/c\n.\n\n\nCalculation of electrostatic fields\n\n\nNow it's time to run \n\nscuff-scatter\n\nwith command-line options specifying the geometry,\nthe incident field, and the desired outputs.\n\n\nBecause there are several options to specify,\nit can get a little unwieldy to type everything\non the command line. In cases like this, it is \nconvenient to write a little shell script in a\ntext editor. For our calculation of electrostatic \nfields on the \nx\n-axis, \nwe'll call this script \nRunScript.XAxis:\n\n\nRunScript.XAxis:\n\n\n#!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/MieScattering\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nARGS=\n\nARGS=\n${ARGS} --geometry E10Sphere_501.scuffgeo\n\n\nARGS=\n${ARGS} --Omega    0.1\n\n\nARGS=\n${ARGS} --PWDirection    0 0 1\n\nARGS=\n${ARGS} --PWPolarization 1 0 0\n\n\nARGS=\n${ARGS} --EPFile EPFile.XAxis\n\n\nARGS=\n${ARGS} --MomentFile E10Sphere_501.moments\n\n\nscuff-scatter ${ARGS}\n\n\n\n\n(The first few lines of this script just set up\nsome convenient file search paths. The \nactual \nscuff-scatter\n\ncommand-line options are pretty self-explanatory;\nfor details, consult the \nthe \nscuff-scatter\n command-line option\nreference\n.\n\n\nNow just execute this script at the command prompt.\n(The first line below just changes the file permissions\nof the text file \nRunScript.XAxis\n to allow it to be\nexecuted as a program).\n\n\n% chmod 755 RunScript.XAxis\n% RunScript.XAxis\n  Thank you for your support.\n%\n\n\n\n\nThis calculation, which takes 9 seconds on my laptop,\nproduces the following output files:\n\n\n\n\n\n\nE10Sphere_501.moments\n (induced dipole moments)\n\n\n\n\n\n\nE10Sphere_501.EPFile.total\n (components of total fields)\n\n\n\n\n\n\nE10Sphere_501.EPFile.scattered\n (components of scattered fields)\n\n\n\n\n\n\nThese are text files containing lines of numbers\nwith header info at the top of the file explaining how to\ninterpret. For example, the \n.moments\n file looks like\nthis:\n\n\nE10Sphere_501.moments\n\n\n# data file columns: \n# 1     angular frequency (3e14 rad/sec)\n# 2     surface label\n# 03,04 real,imag px (electric dipole moment)\n# 05,06 real,imag py \n# 07,08 real,imag pz \n# 09,10 real,imag mx (magnetic dipole moment)\n# 11,12 real,imag my \n# 13,14 real,imag mz \n#\n0.1 Sphere 2.43029353e-02 1.29331270e-05  -2.68984543e-05 5.49622097e-07  2.58971375e-06 1.60193412e-07  1.10209973e-07 -3.46602175e-09  1.05593764e-04 -9.50837519e-07  -1.98838334e-08 -7.19777997e-07  \n\n\n\n\nNext, let's use \ngnuplot\n\nto plot the \nx\n component of the total field as\nreported in the file \nE10Sphere_501.EPFile.total\n:\n\n\n gnuplot\n plot 'E10SPhere_501.EPFile.total' u 1:5 w lp pt 7 ps 1, 0.25\n\n\n\n\n\n\nCalculation in BUFF-EM\n\n\nWe can also run the same calculation in \nbuff-em\n.\nThe main difference is that we have to produce a \nvolume\n mesh\ninstead of a \nsurface\n mesh, which basically just involves\nrunning \ngmsh -3\n instead of \ngmsh -2\n and produces a meshfile\ncalled \nSphere_677.msh\n instead of \nSphere_501.msh\n (corresponding\nto 677 interior tetrahedron faces instead of 501 interior triangle\nedges). To avoid confusion I always rename the \n.msh\n files\nproduced by \ngmsh\n for volume meshes to have file extension\n\n.vmsh\n, so the \nvmshFiles\n subdirectory of \nSCUFFTutorial/MieScattering\n\ncontains a 3D volume mesh called \nSphere_677.vmsh\n\nand the corresponding \nbuff-em\n\ninput file is \nbuffgeoFiles/E10Sphere_677.buffgeo.\n\n\nHere's the run script\nfor the \nbuff-em\n calculation:\n\n\nRunScript.buffEM\n\n\n#!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/MieScattering\n\nexport BUFF_MESH_PATH=${BASEDIR}/vmshFiles\n\nARGS=\n\nARGS=\n${ARGS} --geometry buffgeoFiles/E10Sphere_677.buffgeo\n\n\nARGS=\n${ARGS} --Omega    0.1\n\n\nARGS=\n${ARGS} --PWDirection    0 0 1\n\nARGS=\n${ARGS} --PWPolarization 1 0 0\n\n\nARGS=\n${ARGS} --EPFile EPFile.XAxis\n\n\nARGS=\n${ARGS} --MomentFile E10Sphere_677.moments\n\n\nbuff-scatter ${ARGS}", 
            "title": "First calculation: Mie scattering"
        }, 
        {
            "location": "/MieScattering/#exact-solution", 
            "text": "For this problem, the full scattered fields may be expressed\nexactly as a sum of vector spherical waves;\nthe full treatment may be found in  this memo \nor any electromagnetism textbook.\nHere we will two aspects of this solution.", 
            "title": "Exact solution"
        }, 
        {
            "location": "/MieScattering/#field-components-in-the-electrostatic-limit", 
            "text": "In the low-frequency limit  \\omega\\to 0 , the problem\nreduces to the textbook electrostatics problem of a\ndielectric cylinder placed in a constant external\nfield (see, for example,  Jackson Chapter 4 ).\nThe total electric field inside and outside the sphere\nreads:w  \\mathbf E^\\text{tot}(\\mathbf x) = \n   \\begin{cases}\n   \\displaystyle{\\frac{3}{\\epsilon+2}}E_0, \\qquad &|\\mathbf x|<R \n   \\\\[5pt]\n   \\displaystyle{\n   E_0\\mathbf{\\hat x}\n + \\left(\\frac{\\epsilon-1}{\\epsilon+2}\\right)\n   \\left(\\frac{R}{r}\\right)^3 E_0\n   \\big(3\\mathbf{\\hat r} - \\mathbf{\\hat x}\\big)\n                }, \\qquad &|\\mathbf x|>R.\n   \\end{cases} \nwhere  \\epsilon  is the (relative) DC permittivity of the \nsphere.  The sphere acquires an electric dipole moment of strength  \\mathbf p\n   = 4\\pi\\epsilon_0\\left(\\frac{\\epsilon - 1}{\\epsilon+2}\\right) R^3 E_0 \nand the scattered field outside the sphere is just the electrostatic\nfield of this dipole.  Below we will consider the particular values \\epsilon=10, \\qquad R=1\\,\\mu\\text{m}, \\qquad E_0=1\\text{ V}/\\mu\\text{m} ,\nin which case the theoretical treatment given above\nmakes two simple numerical predictions that we can \nuse to test the accuracy of our numerical solvers:    The  x -component of the \n   \\mathbf E -field inside the sphere is constant and equal to\n    E_x^\\text{inside}\n     \\quad=\\quad\\displaystyle{\\frac{3}{\\epsilon+2}}E_0\n     \\quad=\\quad\\displaystyle{\\frac{3}{12}}E_0\n     \\quad\\quad= \\texttt{0.25} \\text{ V}/\\mu\\text{m} \n        The  x -component of the induced dipole moment is\n    p_x\n    \\quad=\\quad\n      \\frac{4\\pi}{cZ_0}\\cdot\\frac{\\epsilon-1}{\\epsilon+2}R^3 E_0\n      \\quad=\\quad\n      4\\pi\\cdot\\left(\\frac{1}{\\texttt{376.73031...}}\\right)\\cdot \\frac{9}{12}\n      \\quad=\\quad\n      \\texttt{0.02501} \\quad\\text{C }\\cdot\\mu\\text{m}.\n       (In this last calculation I have rewritten the\npermittivity of free space in terms of the vacuum speed\nof light and the vacuum wave impedance,  \\epsilon_0=\\frac{1}{cZ_0} ,\nthen used the values  Z_0\\approx 376.73031  and  c=1 \nin default  scuff-em  units.)", 
            "title": "Field components in the electrostatic limit"
        }, 
        {
            "location": "/MieScattering/#power-force-and-torque-pft-versus-frequency", 
            "text": "Moving out of the low-frequency limit, the textbook\ntheory of Mie scattering makes the following predictions\nfor the total power scattered by the sphere:  P^\\text{scat} = \\frac{\\pi E_0^2}{k^2 Z_0}\\sum_{\\ell=1}^\\infty\n  (2\\ell+1)\\Big( |a_\\ell|^2 + |b_\\ell|^2\\Big) \nwhere  Z_0\\sim 377\\,\\Omega  is the impedance of\nvacuum and the  \\{a,b\\}_\\ell  coefficients are\ndimensionless numbers defined by certain ratios\nof Bessel functions; explicit expressions are\ngiven, for example, in  Bohren   Huffman , who \nalso give similar series expressions for the \nabsorbed power and force (radiation pressure).", 
            "title": "Power, force, and torque (PFT) versus frequency"
        }, 
        {
            "location": "/MieScattering/#solution-in-scuff-em", 
            "text": "All input files referenced below may be found\nin the  MieScattering  subdirectory of the SCUFFTutorial  archive. .", 
            "title": "Solution in SCUFF-EM"
        }, 
        {
            "location": "/MieScattering/#gmsh-geometry-and-mesh-files-geo-and-msh-files", 
            "text": "The first step is to define a triangulated mesh\nrepresentation of the sphere's surface, a task\nfor which we use the wonderful open-source\nprogram  gmsh .\nThe directory  MieScattering/geoFiles \ncontains a  gmsh  input\nfile called  Sphere.geo , which we turn into a\nsurface mesh like this:   mylaptop% gmsh -2 Sphere.geo  This produces the file  Sphere.msh,  which you can open in gmsh  to see what it looks like:", 
            "title": "gmsh geometry and mesh files (.geo and .msh files)"
        }, 
        {
            "location": "/MieScattering/#scuff-em-geometry-files-scuffgeo-files", 
            "text": "Scattering geometries in  scuff-em  are described\nby simple text files conventionally given file extension  .scuffgeo .\n(For reference, here's the  section of the  scuff-em \ndocumentation discussing  .scuffgeo  files .)  We will create two  .scuffgeo  files, describing spheres\nof the same size but consisting of different materials:   For low-frequency calculations, we will consider a dielectric \nsphere of (frequency-independent) relative permittivity  \\epsilon=10 .\nThe  .scuffgeo  file for this case is called  E10Sphere.scuffgeo:     E10Sphere.scuffgeo      OBJECT Sphere\n    MESHFILE Sphere_501.msh\n    MATERIAL CONST_EPS_10\nENDOBJECT   For PFT calculations, we will consider a gold sphere, with\nrelative permittivity described by the function  \\epsilon^\\text{gold} = 1 - \\frac{\\omega_p^2}{\\omega(\\omega+i\\gamma)},\n   \\qquad \\{\\omega_p, \\gamma\\}=\\{1.37\\cdot 10^{16}, 5.32\\cdot 10^{13}\\}\n   \\text{ rad/sec}.    The  .scuffgeo  file for this case looks like this:    GoldSphere.scuffgeo      MATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nOBJECT Sphere\n    MESHFILE Sphere_501.msh\n    MATERIAL GOLD\nENDOBJECT", 
            "title": "scuff-em geometry files (.scuffgeo files)"
        }, 
        {
            "location": "/MieScattering/#file-specifying-field-evaluation-points-epfile", 
            "text": "For calculating field components in the electrostatic\ncase, we need to specify the Cartesian coordinates of\nour desired evaluation points. For this purpose we\nwrite a little text file called  EPFile.XAxis  describing\nevenly-spaced points lying on the  x -axis in the range -3<x<3\\,\\mu\\text{m} :    EPFile.XAxis      -3.0 0.0 0.0\n-2.9 0.0 0.0\n...\n 2.9  0.0 0.0\n 3.0  0.0 0.0", 
            "title": "File specifying field evaluation points (EPFile)"
        }, 
        {
            "location": "/MieScattering/#file-specifying-frequencies-for-pft-calculation-omegafile", 
            "text": "Finally, we need to specify the angular frequencies at which\nwe will compute power, force, and torque (PFT). For this purpose\nwe write a little text file called simply  OmegaFile , \nwhich in this case contains logarithmically-spaced points\nin the range  0.1\\omega_0 < \\omega < 10 \\omega_0 , \nwhere the default frequency unit is  \\omega_0 = c/(1\\,\\mu\\text{m})=3\\cdot 10^{14}\\text{ rad/sec}.     OmegaFile      0.10000000\n0.12589254\n...\n7.94328235\n10.00000000  Note that the numerical values of  \\omega  here coincide\nwith numerical values of the dimensionless \nMie size parameter  kR=\\omega R/c .", 
            "title": "File specifying frequencies for PFT calculation (OmegaFile)"
        }, 
        {
            "location": "/MieScattering/#calculation-of-electrostatic-fields", 
            "text": "Now it's time to run  scuff-scatter \nwith command-line options specifying the geometry,\nthe incident field, and the desired outputs.  Because there are several options to specify,\nit can get a little unwieldy to type everything\non the command line. In cases like this, it is \nconvenient to write a little shell script in a\ntext editor. For our calculation of electrostatic \nfields on the  x -axis, \nwe'll call this script  RunScript.XAxis:  RunScript.XAxis:  #!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/MieScattering\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nARGS= \nARGS= ${ARGS} --geometry E10Sphere_501.scuffgeo \n\nARGS= ${ARGS} --Omega    0.1 \n\nARGS= ${ARGS} --PWDirection    0 0 1 \nARGS= ${ARGS} --PWPolarization 1 0 0 \n\nARGS= ${ARGS} --EPFile EPFile.XAxis \n\nARGS= ${ARGS} --MomentFile E10Sphere_501.moments \n\nscuff-scatter ${ARGS}  (The first few lines of this script just set up\nsome convenient file search paths. The \nactual  scuff-scatter \ncommand-line options are pretty self-explanatory;\nfor details, consult the \nthe  scuff-scatter  command-line option\nreference .  Now just execute this script at the command prompt.\n(The first line below just changes the file permissions\nof the text file  RunScript.XAxis  to allow it to be\nexecuted as a program).  % chmod 755 RunScript.XAxis\n% RunScript.XAxis\n  Thank you for your support.\n%  This calculation, which takes 9 seconds on my laptop,\nproduces the following output files:    E10Sphere_501.moments  (induced dipole moments)    E10Sphere_501.EPFile.total  (components of total fields)    E10Sphere_501.EPFile.scattered  (components of scattered fields)    These are text files containing lines of numbers\nwith header info at the top of the file explaining how to\ninterpret. For example, the  .moments  file looks like\nthis:  E10Sphere_501.moments  # data file columns: \n# 1     angular frequency (3e14 rad/sec)\n# 2     surface label\n# 03,04 real,imag px (electric dipole moment)\n# 05,06 real,imag py \n# 07,08 real,imag pz \n# 09,10 real,imag mx (magnetic dipole moment)\n# 11,12 real,imag my \n# 13,14 real,imag mz \n#\n0.1 Sphere 2.43029353e-02 1.29331270e-05  -2.68984543e-05 5.49622097e-07  2.58971375e-06 1.60193412e-07  1.10209973e-07 -3.46602175e-09  1.05593764e-04 -9.50837519e-07  -1.98838334e-08 -7.19777997e-07    Next, let's use  gnuplot \nto plot the  x  component of the total field as\nreported in the file  E10Sphere_501.EPFile.total :   gnuplot  plot 'E10SPhere_501.EPFile.total' u 1:5 w lp pt 7 ps 1, 0.25", 
            "title": "Calculation of electrostatic fields"
        }, 
        {
            "location": "/MieScattering/#calculation-in-buff-em", 
            "text": "We can also run the same calculation in  buff-em .\nThe main difference is that we have to produce a  volume  mesh\ninstead of a  surface  mesh, which basically just involves\nrunning  gmsh -3  instead of  gmsh -2  and produces a meshfile\ncalled  Sphere_677.msh  instead of  Sphere_501.msh  (corresponding\nto 677 interior tetrahedron faces instead of 501 interior triangle\nedges). To avoid confusion I always rename the  .msh  files\nproduced by  gmsh  for volume meshes to have file extension .vmsh , so the  vmshFiles  subdirectory of  SCUFFTutorial/MieScattering \ncontains a 3D volume mesh called  Sphere_677.vmsh \nand the corresponding  buff-em \ninput file is  buffgeoFiles/E10Sphere_677.buffgeo.  Here's the run script\nfor the  buff-em  calculation:  RunScript.buffEM  #!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/MieScattering\n\nexport BUFF_MESH_PATH=${BASEDIR}/vmshFiles\n\nARGS= \nARGS= ${ARGS} --geometry buffgeoFiles/E10Sphere_677.buffgeo \n\nARGS= ${ARGS} --Omega    0.1 \n\nARGS= ${ARGS} --PWDirection    0 0 1 \nARGS= ${ARGS} --PWPolarization 1 0 0 \n\nARGS= ${ARGS} --EPFile EPFile.XAxis \n\nARGS= ${ARGS} --MomentFile E10Sphere_677.moments \n\nbuff-scatter ${ARGS}", 
            "title": "Calculation in BUFF-EM"
        }, 
        {
            "location": "/Nanoparticle/", 
            "text": "Scattering and absorption by plasmonic nanoparticles\n\n\nIn this tutorial we will compute frequency-dependent\nscattering and absorption profiles\nfor the following varieties of plasmonic nanoparticle\nconfiguration:\n\n\n\n\nSingle triangular gold nanoparticle:\n\n\n\n\n\n\n\n\nTwo facing triangular gold nanoparticles:\n\n\n\n\n\n\n\n\nGold-coated SiO2 nanoparticle:\n\n\n\n\n\n\nThe input files for this example are in the \n\nNanoparticles\n subdirectory of the \n\nSCUFFTutorial\n archive\n.\n\n\nTo avoid having to enter lengthy subdirectory prefixes when\nspecifying \nscuff-em\n input files, \nit's convenient to set the following environment variables\nto tell \nscuff-em\n\nwhere to look for \n.msh\n and \n.scuffgeo\n files:\n\n\n% export SCUFF_MESH_PATH=${HOME}/SCUFFTutorial/Nanoparticles/mshFiles\n% export SCUFF_GEO_PATH=${HOME}/SCUFFTutorial/Nanoparticles/scuffgeoFiles\n\n\n\n\nGMSH geometry file\n\n\nThe file\n\nTriangle.geo\n\n lives in the subdirectory \n\nNanoparticles/geoFiles.\n This file contains\nthe following user-tweakable parameters: \n\n\n\n\n\n\nL:\n Triangle edge length (default 300 nm)\n\n\n\n\n\n\nR:\n Corner rounding radius (default 25 nm)\n\n\n\n\n\n\nT:\n Thickness (default 150 nm)\n\n\n\n\n\n\nHere's the sequence of geometrical primitives\nI use to build up the geometry shown above.\n\n\n\n\nStep 1\n\n\n// define first point of triangle to lie at the origin\nPoint(1) = {0, 0, -T/2, LS};\n\n\n\n\n\n\n\n\nStep 2\n\n\n// extrude through circular arcs to define a rounded corner\nExtrude { {0,0,1}, {0, 2*R, 0}, +Pi/3 } { Point{1}; }\nExtrude { {0,0,1}, {0, 2*R, 0}, -Pi/3 } { Point{1}; }\n\n\n\n\n\n\n\n\nStep 3\n\n\n// replicate the lines (really \narcs\n) just created\n// to define the other two triangle corners\nRotate { {0,0,1}, {0,R+L*Sqrt[3]/4, 0}, +2*Pi/3  } { Duplicata{Line{1,2}; }}\nRotate { {0,0,1}, {0,R+L*Sqrt[3]/4, 0}, -2*Pi/3  } { Duplicata{Line{1,2}; }}\n\n\n\n\n\n\n\n\nStep 4\n\n\n// connect endpoints to define a closed loop bounding a surface\nLine(10) = {2,12};\nLine(11) = {7,20};\nLine(12) = {15,4};\nLine Loop(1) = {1, 10, -4, 3, 11, -6, 5, 12, -2};\nPlane Surface(1) = {1};\n\n\n\n\n\n\n\n\nStep 5\n\n\n// for the finite-thickness case, extrude in the z direction\nIf (T!=0)\n  Extrude {0,0,T} { Surface{1}; }\nEndIf\n\n\n\n\n\n\n\n\n\nGMSH mesh files\n\n\nWe convert the \n.geo\n file into a \n.msh\n file by running\n\ngmsh\n like this:\n\n\nmylaptop % gmsh -clscale 1.0  -2 Triangle.geo -o Triangle_Medium.msh\nmylaptop % gmsh -clscale 0.75 -2 Triangle.geo -o Triangle_Fine.msh\n\n\n\n\nNote that we have used the\n\nscuff-em\n command-line option\n\n-clscale\n (which stands for \"characteristic length scale\")\nto create medium-resolution and finer-resolution meshes:\n\n\nTriangle_Medium.msh\n\n\n\n\nTriangle_Fine.msh\n\n\n\n\nI will also make smaller versions of this geometry in which\nall linear dimensions are reduced by 20% from their default values:\n\n\nmylaptop % gmsh -clscale 1.0  -setnumber L 0.240 -setnumber R 0.20 -setnumber T 0.120 -2 Triangle.geo -o SmallTriangle_Medium.msh\nmylaptop % gmsh -clscale 1.0  -setnumber L 0.240 -setnumber R 0.20 -setnumber T 0.120 -2 Triangle.geo -o SmallTriangle_Fine.msh\n\n\n\n\nSmallTriangle_Fine.msh\n\n\n\n\n\n\n\nSCUFF-EM geometry files\n\n\nSingle gold triangle, medium resolution\n\n\n \nGoldTriangle_Medium.scuffgeo\n\n\nMATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nOBJECT Triangle\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\nENDOBJECT\n\n\n\n\nTwo gold triangles, medium resolution, tip-tip separation 50 nm\n\n\n \nTwoGoldTriangles_Medium.scuffgeo\n\n\nMATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nOBJECT NorthTriangle\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\n    DISPLACED 0 0.025 0\nENDOBJECT\n\nOBJECT SouthTriangle\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\n    ROTATED 180 ABOUT 0 0 1\n    DISPLACED 0 -0.025 0\nENDOBJECT\n\n\n\n\nWith more complicated \n.scuffgeo\n files like this,\nbefore launching any calculations \nit's generally a good idea to visualize the configuration\nas interpreted by \nscuff-em\n\njust to make sure you are getting the geometry you \nwant. This can be done by using the \n\nscuff-analyze\n\nutility with the \n--WriteGMSHFiles\n option:\n\n\nmylaptop % scuff-analyze --WriteGMSHFiles --geometry TwoGoldTriangles_Medium.scuffgeo\nmylaptop % gmsh TwoGoldTriangles_Medium.pp\n\n\n\n\n\n\nGold-coated SiO2 triangle\n\n\nThe following \n.scuffgeo\n file describes the smaller of \nthe two triangle meshes created above lying fully \ninside\n\nthe larger of the two triangles; the inner triangle is\ncomposed of SiO~2~, while the region between the inner and outer\ntriangles is composed of gold.\n\n\n \nGoldCoatedSiO2Triangle_Medium.scuffgeo\n\n\nMATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nMATERIAL SIO2\n  A1              = 8.2736e+13;\n  w01             = 8.54484e+13;\n  G1              = 8.46448e+12;\n  A2              = 1.58004e+14;\n  w02             = 2.029e+14;\n  G2              = 1.06449e+13;\n  A3              = 3.39786e+13;\n  w03             = 1.51198e+14;\n  G3              = 8.33205e+12;\n  EpsInf          = 2.03843;\n\n  Eps(w) = EpsInf + A1*A1/(w01*w01 - w*w - i*w*G1) + A2*A2/(w02*w02 - w*w - i*w*G2) + A3*A3/(w03*w03 - w*w - i*w*G3);\n\nENDMATERIAL\n\nOBJECT Coating\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\nENDOBJECT\n\nOBJECT Triangle\n    MESHFILE SmallTriangle_Medium.msh\n    MATERIAL SiO2\n    DISPLACED 0 0.025 0\nENDOBJECT\n\n\n\n\nRun \nscuff-analyze\n to visualize:\n\n\nmylaptop % scuff-analyze --WriteGMSHFiles --geometry GoldCoatedSiO2Triangle.scuffgeo\nmylaptop % gmsh GoldCoatedSiO2Triangle.scuffgeo\n\n\n\n\n\n\nCalculating absorbed/scattered power, force, and torque (PFT) vs. frequency\n\n\nThe following script loops over all geometries (single triangle,\ntwo triangles, nested triangles) at both meshing\nresolutions (medium and fine), computing PFT vs. frequency\nat all frequencies in \nOmegaFile\n assuming\na \nz\n-directed \nx\n-polarized incident plane wave:\n\n\nRunScript\n\n\n#!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/Nanoparticles\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nfor RES in Medium Fine\ndo\n  for GEOM in GoldTriangle TwoGoldTriangles GoldCoatedSiO2Triangle\n  do\n    ARGS=\n\n    ARGS=\n${ARGS} --geometry ${GEOM}_${RES}.scuffgeo\n\n    ARGS=\n${ARGS} --OmegaFile ${BASEDIR}/OmegaFile\n\n    ARGS=\n${ARGS} --PWDirection 0 0 1\n\n    ARGS=\n${ARGS} --PWPolarization 1 0 0\n\n    ARGS=\n${ARGS} --PFTFile ${GEOM}_${RES}.PFT\n    scuff-scatter ${ARGS}\n  done\ndone\n\n\n\n\nRun the script:\n\n\n % chmod 755 RunScript\n % RunScript\n\n\n\n\nPlot power absorption vs. frequency:\n\n\nAdvanced: Running the calculation for multiple incident-field polarizations and tip-tip separations at the same time\n\n\n% scuff-analyze --TransFile TransFile --geometry scuffgeoFiles/TwoGoldTriangles_Medium.scuffgeo\n% gmsh TwoGoldTriangles_Medium.transformed.pp \n\n\n\n\n![TransformedTriangles][TransformedTriangles.png]", 
            "title": "Scattering and absorption by plasmonic nanoparticles"
        }, 
        {
            "location": "/Nanoparticle/#gmsh-geometry-file", 
            "text": "The file Triangle.geo \n lives in the subdirectory  Nanoparticles/geoFiles.  This file contains\nthe following user-tweakable parameters:     L:  Triangle edge length (default 300 nm)    R:  Corner rounding radius (default 25 nm)    T:  Thickness (default 150 nm)    Here's the sequence of geometrical primitives\nI use to build up the geometry shown above.   Step 1  // define first point of triangle to lie at the origin\nPoint(1) = {0, 0, -T/2, LS};    Step 2  // extrude through circular arcs to define a rounded corner\nExtrude { {0,0,1}, {0, 2*R, 0}, +Pi/3 } { Point{1}; }\nExtrude { {0,0,1}, {0, 2*R, 0}, -Pi/3 } { Point{1}; }    Step 3  // replicate the lines (really  arcs ) just created\n// to define the other two triangle corners\nRotate { {0,0,1}, {0,R+L*Sqrt[3]/4, 0}, +2*Pi/3  } { Duplicata{Line{1,2}; }}\nRotate { {0,0,1}, {0,R+L*Sqrt[3]/4, 0}, -2*Pi/3  } { Duplicata{Line{1,2}; }}    Step 4  // connect endpoints to define a closed loop bounding a surface\nLine(10) = {2,12};\nLine(11) = {7,20};\nLine(12) = {15,4};\nLine Loop(1) = {1, 10, -4, 3, 11, -6, 5, 12, -2};\nPlane Surface(1) = {1};    Step 5  // for the finite-thickness case, extrude in the z direction\nIf (T!=0)\n  Extrude {0,0,T} { Surface{1}; }\nEndIf", 
            "title": "GMSH geometry file"
        }, 
        {
            "location": "/Nanoparticle/#gmsh-mesh-files", 
            "text": "We convert the  .geo  file into a  .msh  file by running gmsh  like this:  mylaptop % gmsh -clscale 1.0  -2 Triangle.geo -o Triangle_Medium.msh\nmylaptop % gmsh -clscale 0.75 -2 Triangle.geo -o Triangle_Fine.msh  Note that we have used the scuff-em  command-line option -clscale  (which stands for \"characteristic length scale\")\nto create medium-resolution and finer-resolution meshes:  Triangle_Medium.msh   Triangle_Fine.msh   I will also make smaller versions of this geometry in which\nall linear dimensions are reduced by 20% from their default values:  mylaptop % gmsh -clscale 1.0  -setnumber L 0.240 -setnumber R 0.20 -setnumber T 0.120 -2 Triangle.geo -o SmallTriangle_Medium.msh\nmylaptop % gmsh -clscale 1.0  -setnumber L 0.240 -setnumber R 0.20 -setnumber T 0.120 -2 Triangle.geo -o SmallTriangle_Fine.msh  SmallTriangle_Fine.msh", 
            "title": "GMSH mesh files"
        }, 
        {
            "location": "/Nanoparticle/#scuff-em-geometry-files", 
            "text": "", 
            "title": "SCUFF-EM geometry files"
        }, 
        {
            "location": "/Nanoparticle/#single-gold-triangle-medium-resolution", 
            "text": "GoldTriangle_Medium.scuffgeo  MATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nOBJECT Triangle\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\nENDOBJECT", 
            "title": "Single gold triangle, medium resolution"
        }, 
        {
            "location": "/Nanoparticle/#two-gold-triangles-medium-resolution-tip-tip-separation-50-nm", 
            "text": "TwoGoldTriangles_Medium.scuffgeo  MATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nOBJECT NorthTriangle\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\n    DISPLACED 0 0.025 0\nENDOBJECT\n\nOBJECT SouthTriangle\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\n    ROTATED 180 ABOUT 0 0 1\n    DISPLACED 0 -0.025 0\nENDOBJECT  With more complicated  .scuffgeo  files like this,\nbefore launching any calculations \nit's generally a good idea to visualize the configuration\nas interpreted by  scuff-em \njust to make sure you are getting the geometry you \nwant. This can be done by using the  scuff-analyze \nutility with the  --WriteGMSHFiles  option:  mylaptop % scuff-analyze --WriteGMSHFiles --geometry TwoGoldTriangles_Medium.scuffgeo\nmylaptop % gmsh TwoGoldTriangles_Medium.pp", 
            "title": "Two gold triangles, medium resolution, tip-tip separation 50 nm"
        }, 
        {
            "location": "/Nanoparticle/#gold-coated-sio2-triangle", 
            "text": "The following  .scuffgeo  file describes the smaller of \nthe two triangle meshes created above lying fully  inside \nthe larger of the two triangles; the inner triangle is\ncomposed of SiO~2~, while the region between the inner and outer\ntriangles is composed of gold.    GoldCoatedSiO2Triangle_Medium.scuffgeo  MATERIAL GOLD\n    wp = 1.37e16; \n    gamma = 5.32e13;\n    Eps(w) = 1 - wp^2 / (w * (w + i*gamma));\nENDMATERIAL\n\nMATERIAL SIO2\n  A1              = 8.2736e+13;\n  w01             = 8.54484e+13;\n  G1              = 8.46448e+12;\n  A2              = 1.58004e+14;\n  w02             = 2.029e+14;\n  G2              = 1.06449e+13;\n  A3              = 3.39786e+13;\n  w03             = 1.51198e+14;\n  G3              = 8.33205e+12;\n  EpsInf          = 2.03843;\n\n  Eps(w) = EpsInf + A1*A1/(w01*w01 - w*w - i*w*G1) + A2*A2/(w02*w02 - w*w - i*w*G2) + A3*A3/(w03*w03 - w*w - i*w*G3);\n\nENDMATERIAL\n\nOBJECT Coating\n    MESHFILE Triangle_Medium.msh\n    MATERIAL Gold\nENDOBJECT\n\nOBJECT Triangle\n    MESHFILE SmallTriangle_Medium.msh\n    MATERIAL SiO2\n    DISPLACED 0 0.025 0\nENDOBJECT  Run  scuff-analyze  to visualize:  mylaptop % scuff-analyze --WriteGMSHFiles --geometry GoldCoatedSiO2Triangle.scuffgeo\nmylaptop % gmsh GoldCoatedSiO2Triangle.scuffgeo", 
            "title": "Gold-coated SiO2 triangle"
        }, 
        {
            "location": "/Nanoparticle/#calculating-absorbedscattered-power-force-and-torque-pft-vs-frequency", 
            "text": "The following script loops over all geometries (single triangle,\ntwo triangles, nested triangles) at both meshing\nresolutions (medium and fine), computing PFT vs. frequency\nat all frequencies in  OmegaFile  assuming\na  z -directed  x -polarized incident plane wave:  RunScript  #!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/Nanoparticles\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nfor RES in Medium Fine\ndo\n  for GEOM in GoldTriangle TwoGoldTriangles GoldCoatedSiO2Triangle\n  do\n    ARGS= \n    ARGS= ${ARGS} --geometry ${GEOM}_${RES}.scuffgeo \n    ARGS= ${ARGS} --OmegaFile ${BASEDIR}/OmegaFile \n    ARGS= ${ARGS} --PWDirection 0 0 1 \n    ARGS= ${ARGS} --PWPolarization 1 0 0 \n    ARGS= ${ARGS} --PFTFile ${GEOM}_${RES}.PFT\n    scuff-scatter ${ARGS}\n  done\ndone  Run the script:   % chmod 755 RunScript\n % RunScript  Plot power absorption vs. frequency:", 
            "title": "Calculating absorbed/scattered power, force, and torque (PFT) vs. frequency"
        }, 
        {
            "location": "/Nanoparticle/#advanced-running-the-calculation-for-multiple-incident-field-polarizations-and-tip-tip-separations-at-the-same-time", 
            "text": "% scuff-analyze --TransFile TransFile --geometry scuffgeoFiles/TwoGoldTriangles_Medium.scuffgeo\n% gmsh TwoGoldTriangles_Medium.transformed.pp   ![TransformedTriangles][TransformedTriangles.png]", 
            "title": "Advanced: Running the calculation for multiple incident-field polarizations and tip-tip separations at the same time"
        }, 
        {
            "location": "/BowtieAntennas/", 
            "text": "LDOS at the hotspot of a bowtie antenna\n\n\nFor our next trick, we'll investigate the local density of states (LDOS)\nand incident-field enhancement at the hotspot of bowtie antenna.\n\n\nThe input files for this example are in the \nPolarizationSensitiveAntenna\n\nsubdirectory of the \n\nSCUFFTutorial\n archive\n. To avoid typing\nfolder prefixes at the command line, it's convenient to set up\n\nscuff-em\n search paths\nas follows:\n\n\n% export SCUFF_MESH_PATH=${HOME}/SCUFFTutorial/PolarizationSensitiveAntenna/mshFiles\n% export SCUFF_GEO_PATH=${HOME}/SCUFFTutorial/PolarizationSensitiveAntenna/scuffgeoFiles\n\n\n\n\nGMSH geometries and mesh files\n\n\nThe GMSH geometry file \nTriangle.geo\n in the \n.geoFiles\n folder\nis similar to\nthe one we used in the previous exercise, but with different\ndefault dimensions:\n\n\nTriangle_Fine.msh\n\n\n\n\nSCUFF-EM geometry files\n\n\nThe \nscuffgeoFiles\n directory contains a series files named\n\nBowtie35_Medium.scuffgeo\n ...  \nBowtie95_Medium.scuffgeo\n\ndescribing 4-point bowtie antennas with various tip-tip\nseparation distances:\n\n\nBowtie35_Fine.scuffgeo\n\n\nOBJECT NorthTriangle\n  MESHFILE Triangle_Medium.msh\n  DISPLACED 0.00 0.035 0.000\nENDOBJECT\n\nOBJECT SouthTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 180 ABOUT 0 0 1\n  DISPLACED 0.00 -0.035 0.000\nENDOBJECT\n\nOBJECT WestTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 90 ABOUT 0 0 1\n  DISPLACED -0.035 0.000 0.000\nENDOBJECT\n\nOBJECT EastTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 270 ABOUT 0 0 1\n  DISPLACED 0.035 0.000 0.000\nENDOBJECT\n\n\n\n\nBowtie95_Fine.scuffgeo\n\n\nOBJECT NorthTriangle\n  MESHFILE Triangle_Medium.msh\n  DISPLACED 0.00 0.095 0.000\nENDOBJECT\n\nOBJECT SouthTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 180 ABOUT 0 0 1\n  DISPLACED 0.00 -0.095 0.000\nENDOBJECT\n\nOBJECT WestTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 90 ABOUT 0 0 1\n  DISPLACED -0.095 0.000 0.000\nENDOBJECT\n\nOBJECT EastTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 270 ABOUT 0 0 1\n  DISPLACED 0.095 0.000 0.000\nENDOBJECT\n\n\n\n\nTo visualize these files, we go like this:\n\n\n % scuff-analyze --WriteGMSHFiles Bowtie35_Fine.scuffgeo\n % scuff-analyze --WriteGMSHFiles Bowtie65_Fine.scuffgeo\n % scuff-analyze --WriteGMSHFiles Bowtie95_Fine.scuffgeo\n % gmsh Bowtie35_Fine.scuffgeo Bowtie65_Fine.scuffgeo Bowtie95_Fine.scuffgeo\n\n\n\n\nBowtie35_Fine.scuffgeo\n\n\n\n\nBowtie65_Fine.scuffgeo\n\n\n\n\nBowtie95_Fine.scuffgeo\n\n\n\n\nCalculating LDOS at the hotspot\n\n\nAs explained in \nthis memo\n,\nthe scattering dyadic Green's functions (DGFs)\nand local density of states (LDOS) at a given frequency \n\\omega\n\nand point \nx\n can be computed by performing 6 separate\nscattering calculations, each involving incident fields\nradiated by a point source at \nx\n. Thus, one way to do\nLDOS calculations in \nscuff-em\n\nwould be to do 6 separate\n\nscuff-scatter\n\ncalculations at each frequency,\nusing the \n\n--psDirection\n and \n--psStrength\n options\n\nto define point-source incident fields.\n\n\nHowever, as explained in the memo above, this calculation can be considerably\nstreamlined by exploiting certain computational redundancies,\nand this accelerated algorithm for LDOS calculations is implemented\nby the\n\nscuff-ldos\n application module\n\nin the \nscuff-em\n suite.\n\n\nHere's a simple script that uses\n\nscuff-ldos\n to compute LDOS vs. frequency \nand tip-tip separation at the hotspot (center point)\nof the bowtie antennas shown above.\n\n\nRunScript.LDOS\n\n\n#!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/PolarizationSensitiveAntenna\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nfor RES in Medium Fine\ndo\n  for N in 35 65 95\n  do\n    ARGS=\n\n    ARGS=\n${ARGS} --geometry Bowtie${N}_${RES}.scuffgeo\n\n    ARGS=\n${ARGS} --LambdaFile ${BASEDIR}/LambdaFile\n\n    ARGS=\n${ARGS} --EPFile ${BASEDIR}/EPFile.HotSpot\n\n    scuff-ldos ${ARGS}\n  done\ndone\n\n\n\n\nHere \nLambdaFile\n is a list of wavelengths at which \nto run the calculation and \nEPFile.HotSpot\n \nspecifies the coordinates of just a single evaluation\npoint, the hotspot:\n\n\nEPFile.HotSpot\n\n\n0.0 0.0 0.0\n\n\n\n\n\n\nHere's the \n\ngnuplot\n\nscript I used to produce this plot: \n\nLDOSPlotter.gp", 
            "title": "LDOS and field concentration at the hotspot of a bowtie antenna"
        }, 
        {
            "location": "/BowtieAntennas/#gmsh-geometries-and-mesh-files", 
            "text": "The GMSH geometry file  Triangle.geo  in the  .geoFiles  folder\nis similar to\nthe one we used in the previous exercise, but with different\ndefault dimensions:  Triangle_Fine.msh", 
            "title": "GMSH geometries and mesh files"
        }, 
        {
            "location": "/BowtieAntennas/#scuff-em-geometry-files", 
            "text": "The  scuffgeoFiles  directory contains a series files named Bowtie35_Medium.scuffgeo  ...   Bowtie95_Medium.scuffgeo \ndescribing 4-point bowtie antennas with various tip-tip\nseparation distances:  Bowtie35_Fine.scuffgeo  OBJECT NorthTriangle\n  MESHFILE Triangle_Medium.msh\n  DISPLACED 0.00 0.035 0.000\nENDOBJECT\n\nOBJECT SouthTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 180 ABOUT 0 0 1\n  DISPLACED 0.00 -0.035 0.000\nENDOBJECT\n\nOBJECT WestTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 90 ABOUT 0 0 1\n  DISPLACED -0.035 0.000 0.000\nENDOBJECT\n\nOBJECT EastTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 270 ABOUT 0 0 1\n  DISPLACED 0.035 0.000 0.000\nENDOBJECT  Bowtie95_Fine.scuffgeo  OBJECT NorthTriangle\n  MESHFILE Triangle_Medium.msh\n  DISPLACED 0.00 0.095 0.000\nENDOBJECT\n\nOBJECT SouthTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 180 ABOUT 0 0 1\n  DISPLACED 0.00 -0.095 0.000\nENDOBJECT\n\nOBJECT WestTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 90 ABOUT 0 0 1\n  DISPLACED -0.095 0.000 0.000\nENDOBJECT\n\nOBJECT EastTriangle\n  MESHFILE Triangle_Medium.msh\n  ROTATED 270 ABOUT 0 0 1\n  DISPLACED 0.095 0.000 0.000\nENDOBJECT  To visualize these files, we go like this:   % scuff-analyze --WriteGMSHFiles Bowtie35_Fine.scuffgeo\n % scuff-analyze --WriteGMSHFiles Bowtie65_Fine.scuffgeo\n % scuff-analyze --WriteGMSHFiles Bowtie95_Fine.scuffgeo\n % gmsh Bowtie35_Fine.scuffgeo Bowtie65_Fine.scuffgeo Bowtie95_Fine.scuffgeo  Bowtie35_Fine.scuffgeo   Bowtie65_Fine.scuffgeo   Bowtie95_Fine.scuffgeo", 
            "title": "SCUFF-EM geometry files"
        }, 
        {
            "location": "/BowtieAntennas/#calculating-ldos-at-the-hotspot", 
            "text": "As explained in  this memo ,\nthe scattering dyadic Green's functions (DGFs)\nand local density of states (LDOS) at a given frequency  \\omega \nand point  x  can be computed by performing 6 separate\nscattering calculations, each involving incident fields\nradiated by a point source at  x . Thus, one way to do\nLDOS calculations in  scuff-em \nwould be to do 6 separate scuff-scatter \ncalculations at each frequency,\nusing the  --psDirection  and  --psStrength  options \nto define point-source incident fields.  However, as explained in the memo above, this calculation can be considerably\nstreamlined by exploiting certain computational redundancies,\nand this accelerated algorithm for LDOS calculations is implemented\nby the scuff-ldos  application module \nin the  scuff-em  suite.  Here's a simple script that uses scuff-ldos  to compute LDOS vs. frequency \nand tip-tip separation at the hotspot (center point)\nof the bowtie antennas shown above.  RunScript.LDOS  #!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/PolarizationSensitiveAntenna\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nfor RES in Medium Fine\ndo\n  for N in 35 65 95\n  do\n    ARGS= \n    ARGS= ${ARGS} --geometry Bowtie${N}_${RES}.scuffgeo \n    ARGS= ${ARGS} --LambdaFile ${BASEDIR}/LambdaFile \n    ARGS= ${ARGS} --EPFile ${BASEDIR}/EPFile.HotSpot \n    scuff-ldos ${ARGS}\n  done\ndone  Here  LambdaFile  is a list of wavelengths at which \nto run the calculation and  EPFile.HotSpot  \nspecifies the coordinates of just a single evaluation\npoint, the hotspot:  EPFile.HotSpot  0.0 0.0 0.0   Here's the  gnuplot \nscript I used to produce this plot:  LDOSPlotter.gp", 
            "title": "Calculating LDOS at the hotspot"
        }, 
        {
            "location": "/PolarizationSensitiveAntennas/", 
            "text": "Polarization-dependent field amplification by bowtie antennas\n\n\nFor our next trick, we'll surround the 4-triangle bowtie\nantennas of the previous exercise\n\n\ntake a page from the following paper \nof Trevino \net. al\n:\n\n\nThe files for this example are in the \nPolarizationSensitiveAntennas\n\nsubfolder of the\n\nSCUFFTutorial\n archive\n.\n\n\n% export SCUFF_MESH_PATH=${HOME}/SCUFFTutorial/Nanoparticles/mshFiles\n% export SCUFF_GEO_PATH=${HOME}/SCUFFTutorial/Nanoparticles/scuffgeoFiles\n\n\n\n\nGMSH geometry and mesh files\n\n\nWe use the same thin triangle mesh as in the previous exercise,\nbut now augment this with a new \n\ngmsh\n geometry file\nnamed \nDisc.geo\n, \nwhich describes a cylinder of user-tweakable height and radius.\nUsing this core geometry file, I produce meshes for \ncylinders of thickness 30 nm and diameter {160, 185} nm\nat medium and fine resolutions:\n\n\n#!/bin/bash\n\nGEOFILE=Disc.geo\nBASE=D160Cylinder\nARGS=\n-2 -setnumber R 0.080 -setnumber T 0.03 ${GEOFILE}\n\ngmsh ${ARGS} -setnumber MeshScale 1.0  -o ${BASE}_Coarse.msh\ngmsh ${ARGS} -setnumber MeshScale 0.75 -o ${BASE}_Medium.msh\ngmsh ${ARGS} -setnumber MeshScale 0.5  -o ${BASE}_Fine.msh\n\nGEOFILE=Disc.geo\nBASE=D185Cylinder\nARGS=\n-2 -setnumber R 0.0925 -setnumber T 0.03 ${GEOFILE}\n\ngmsh ${ARGS} -setnumber MeshScale 1.0  -o ${BASE}_Coarse.msh\ngmsh ${ARGS} -setnumber MeshScale 0.75 -o ${BASE}_Medium.msh\ngmsh ${ARGS} -setnumber MeshScale 0.5  -o ${BASE}_Fine.msh\n\n\n\n\n\n\nSCUFF-EM geometry files\n\n\nBowtieDiscs5_Fine.scuffgeo\n\n\nOBJECT NorthTriangle\n  MESHFILE Triangle_Fine.msh\n  DISPLACED 0.00 0.030 0.000\nENDOBJECT\n\nOBJECT SouthTriangle\n  MESHFILE Triangle_Fine.msh\n  ROTATED 180 ABOUT 0 0 1\n  DISPLACED 0.00 -0.030 0.000\nENDOBJECT\n\nOBJECT WestTriangle\n  MESHFILE Triangle_Fine.msh\n  ROTATED 90 ABOUT 0 0 1\n  DISPLACED -0.030 0.000 0.000\nENDOBJECT\n\nOBJECT EastTriangle\n  MESHFILE Triangle_Fine.msh\n  ROTATED 270 ABOUT 0 0 1\n  DISPLACED 0.030 0.000 0.000\nENDOBJECT\n\nOBJECT XM1Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -0.540 0.0 0.0\nENDOBJECT\n\nOBJECT XP1Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  0.540 0.0 0.0\nENDOBJECT\n\nOBJECT XM2Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -1.080 0.0 0.0\nENDOBJECT\n\nOBJECT XP2Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  1.080 0.0 0.0\nENDOBJECT\n\nOBJECT XM3Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -1.620 0.0 0.0\nENDOBJECT\n\nOBJECT XP3Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  1.620 0.0 0.0\nENDOBJECT\n\nOBJECT XM4Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -2.160 0.0 0.0\nENDOBJECT\n\nOBJECT XP4Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  2.160 0.0 0.0\nENDOBJECT\n\nOBJECT XM5Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -2.700 0.0 0.0\nENDOBJECT\n\nOBJECT XP5Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  2.700 0.0 0.0\nENDOBJECT\n\nOBJECT YM1Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -0.600 0.0\nENDOBJECT\n\nOBJECT YP1Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 0.600 0.0\nENDOBJECT\n\nOBJECT YM2Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -1.200 0.0\nENDOBJECT\n\nOBJECT YP2Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 1.200 0.0\nENDOBJECT\n\nOBJECT YM3Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -1.800 0.0\nENDOBJECT\n\nOBJECT YP3Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 1.800 0.0\nENDOBJECT\n\nOBJECT YM4Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -2.400 0.0\nENDOBJECT\n\nOBJECT YP4Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 2.400 0.0\nENDOBJECT\n\nOBJECT YM5Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -3.000 0.0\nENDOBJECT\n\nOBJECT YP5Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 3.000 0.0\nENDOBJECT\n\n\n\n\n\n\nRun calculation in SCUFF-SCATTER\n\n\nRunScript.EXEY\n\n\n#!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/PolarizationSensitiveAntenna\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nfor GEOM in Bowtie_Fine BowtieDiscs5_Fine\ndo\n  ARGS=\n\n  ARGS=\n${ARGS} --geometry ${GEOM}.scuffgeo\n\n  ARGS=\n${ARGS} --LambdaFile ${BASEDIR}/LambdaFile\n\n  ARGS=\n${ARGS} --EPFile ${BASEDIR}/EPFiles/HotSpot\n\n  ARGS=\n${ARGS} --IFFile ${BASEDIR}/IFFile\n\n  scuff-scatter ${ARGS}\ndone\n\n\n\n\nField amplification vs. incident-field polarization without discs\n\n\n\n\nField amplification vs. incident-field polarization with discs", 
            "title": "Polarization-sensitive antennas"
        }, 
        {
            "location": "/PolarizationSensitiveAntennas/#gmsh-geometry-and-mesh-files", 
            "text": "We use the same thin triangle mesh as in the previous exercise,\nbut now augment this with a new  gmsh  geometry file\nnamed  Disc.geo , \nwhich describes a cylinder of user-tweakable height and radius.\nUsing this core geometry file, I produce meshes for \ncylinders of thickness 30 nm and diameter {160, 185} nm\nat medium and fine resolutions:  #!/bin/bash\n\nGEOFILE=Disc.geo\nBASE=D160Cylinder\nARGS= -2 -setnumber R 0.080 -setnumber T 0.03 ${GEOFILE} \ngmsh ${ARGS} -setnumber MeshScale 1.0  -o ${BASE}_Coarse.msh\ngmsh ${ARGS} -setnumber MeshScale 0.75 -o ${BASE}_Medium.msh\ngmsh ${ARGS} -setnumber MeshScale 0.5  -o ${BASE}_Fine.msh\n\nGEOFILE=Disc.geo\nBASE=D185Cylinder\nARGS= -2 -setnumber R 0.0925 -setnumber T 0.03 ${GEOFILE} \ngmsh ${ARGS} -setnumber MeshScale 1.0  -o ${BASE}_Coarse.msh\ngmsh ${ARGS} -setnumber MeshScale 0.75 -o ${BASE}_Medium.msh\ngmsh ${ARGS} -setnumber MeshScale 0.5  -o ${BASE}_Fine.msh", 
            "title": "GMSH geometry and mesh files"
        }, 
        {
            "location": "/PolarizationSensitiveAntennas/#scuff-em-geometry-files", 
            "text": "BowtieDiscs5_Fine.scuffgeo  OBJECT NorthTriangle\n  MESHFILE Triangle_Fine.msh\n  DISPLACED 0.00 0.030 0.000\nENDOBJECT\n\nOBJECT SouthTriangle\n  MESHFILE Triangle_Fine.msh\n  ROTATED 180 ABOUT 0 0 1\n  DISPLACED 0.00 -0.030 0.000\nENDOBJECT\n\nOBJECT WestTriangle\n  MESHFILE Triangle_Fine.msh\n  ROTATED 90 ABOUT 0 0 1\n  DISPLACED -0.030 0.000 0.000\nENDOBJECT\n\nOBJECT EastTriangle\n  MESHFILE Triangle_Fine.msh\n  ROTATED 270 ABOUT 0 0 1\n  DISPLACED 0.030 0.000 0.000\nENDOBJECT\n\nOBJECT XM1Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -0.540 0.0 0.0\nENDOBJECT\n\nOBJECT XP1Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  0.540 0.0 0.0\nENDOBJECT\n\nOBJECT XM2Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -1.080 0.0 0.0\nENDOBJECT\n\nOBJECT XP2Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  1.080 0.0 0.0\nENDOBJECT\n\nOBJECT XM3Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -1.620 0.0 0.0\nENDOBJECT\n\nOBJECT XP3Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  1.620 0.0 0.0\nENDOBJECT\n\nOBJECT XM4Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -2.160 0.0 0.0\nENDOBJECT\n\nOBJECT XP4Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  2.160 0.0 0.0\nENDOBJECT\n\nOBJECT XM5Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED -2.700 0.0 0.0\nENDOBJECT\n\nOBJECT XP5Cylinder\n  MESHFILE D160Cylinder_Fine.msh\n  DISPLACED  2.700 0.0 0.0\nENDOBJECT\n\nOBJECT YM1Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -0.600 0.0\nENDOBJECT\n\nOBJECT YP1Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 0.600 0.0\nENDOBJECT\n\nOBJECT YM2Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -1.200 0.0\nENDOBJECT\n\nOBJECT YP2Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 1.200 0.0\nENDOBJECT\n\nOBJECT YM3Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -1.800 0.0\nENDOBJECT\n\nOBJECT YP3Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 1.800 0.0\nENDOBJECT\n\nOBJECT YM4Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -2.400 0.0\nENDOBJECT\n\nOBJECT YP4Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 2.400 0.0\nENDOBJECT\n\nOBJECT YM5Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 -3.000 0.0\nENDOBJECT\n\nOBJECT YP5Cylinder\n  MESHFILE D185Cylinder_Fine.msh\n  DISPLACED 0.0 3.000 0.0\nENDOBJECT", 
            "title": "SCUFF-EM geometry files"
        }, 
        {
            "location": "/PolarizationSensitiveAntennas/#run-calculation-in-scuff-scatter", 
            "text": "RunScript.EXEY  #!/bin/bash\n\nBASEDIR=${HOME}/SCUFFTutorial/PolarizationSensitiveAntenna\n\nexport SCUFF_MESH_PATH=${BASEDIR}/mshFiles\nexport SCUFF_GEO_PATH=${BASEDIR}/scuffgeoFiles\n\nfor GEOM in Bowtie_Fine BowtieDiscs5_Fine\ndo\n  ARGS= \n  ARGS= ${ARGS} --geometry ${GEOM}.scuffgeo \n  ARGS= ${ARGS} --LambdaFile ${BASEDIR}/LambdaFile \n  ARGS= ${ARGS} --EPFile ${BASEDIR}/EPFiles/HotSpot \n  ARGS= ${ARGS} --IFFile ${BASEDIR}/IFFile \n  scuff-scatter ${ARGS}\ndone", 
            "title": "Run calculation in SCUFF-SCATTER"
        }, 
        {
            "location": "/PolarizationSensitiveAntennas/#field-amplification-vs-incident-field-polarization-without-discs", 
            "text": "", 
            "title": "Field amplification vs. incident-field polarization without discs"
        }, 
        {
            "location": "/PolarizationSensitiveAntennas/#field-amplification-vs-incident-field-polarization-with-discs", 
            "text": "", 
            "title": "Field amplification vs. incident-field polarization with discs"
        }, 
        {
            "location": "/PeriodicDiffraction/", 
            "text": "Diffraction patterns of periodic screens and particle arrays", 
            "title": "Diffraction patterns of periodic screens and particle arrays"
        }, 
        {
            "location": "/SpiralArrays/", 
            "text": "Diffraction patterns of aperiodic particle arrays: Vogel spirals", 
            "title": "Diffraction patterns of aperiodic particle arrays"
        }, 
        {
            "location": "/ChiralMetasurface/", 
            "text": "Polarization-rotated transmission through a chiral metasurface", 
            "title": "Polarization-rotated transmission through a chiral metasurface"
        }, 
        {
            "location": "/OpticalForceTorque/", 
            "text": "Optical force and torque on asymmetric and chiral nanoparticles", 
            "title": "Optical force and torque on asymmetric and chiral nanoparticles"
        }, 
        {
            "location": "/SelfRotation/", 
            "text": "Thermal self-rotation torque on warm chiral nanoparticle in cold background", 
            "title": "Thermal self-rotation torque on warm chiral nanoparticle in cold background"
        }
    ]
}